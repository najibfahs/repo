{% from "_formhelpers.html" import render_field %}

<!DOCTYPE html>
<html>
    <head>
        <!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

        <!-- Bootstrap CSS -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
        <link rel="stylesheet" type="text/css" href="{{url_for('static', filename='css/main.css')}}">
        <link rel="shortcut icon" type="image/x-icon" href="{{url_for('static', filename='images/favicon.png')}}">

        <script src="https://kit.fontawesome.com/6226df76b9.js" crossorigin="anonymous"></script>

        <style>
            body {
                margin: 5rem 1rem 1rem 1rem;
                background: rgb(43,82,121);
                background: linear-gradient(90deg, rgba(43,82,121,1) 0%, rgba(43,82,121,1) 50%, rgba(0,212,255,1) 100%);
                color:white;
            }
        </style>

        <meta charset="utf-8" />
        <title>Reset Password Request</title>
        
    </head>
    <body>
        <div class="container-fluid" >
            <div class="row align-items-center mb-5">
                <div class="col-4">
                    
                </div>

                <div class="col-4" style="text-align:center;">
                    <!--
                    <i class="fas fa-lock-open fa-10x"></i>
                    -->
                    <img src="{{url_for('static', filename='/images/password_reset.svg')}}" width="200" />
                </div>

                <div class="col-4">
                    
                </div>
            </div>

            <div class="row align-items-center">
                <div class="col-4">
                    
                </div>

                <div class="col-4 border border-info rounded">
                    <form action="" method="POST">
                        {{ form.hidden_tag() }} {# same as form.csrf_token #}
                        <fieldset class='form-group'>
                            <legend class='border-bottom'>Reset Password</legend>
                            {{form.password.label(class='form-control-label text-white mb-0')}}
                            <div class="form-row">
                            {% if form.password.errors %}
                                <div class='input-group input-group-sm col-md-12'>
                                    {{ form.password(class='form-control form-control-sm is-invalid', placeholder='Enter your password', maxlength=30) }}
                                    <div class="input-group-append">
                                        <button class="btn btn-outline-warning" type="button" id="psw-show">show</button>
                                    </div>
                                    <div class="invalid-feedback">
                                        {% for error in form.password.errors %}
                                            <span>{{ error }}</span>
                                        {% endfor %}
                                    </div>
                                </div>
                            {% else %}
                                <div class='input-group input-group-sm col-md-12'>
                                    {{ form.password(class='form-control form-control-sm', placeholder='Enter your password', maxlength=30) }}
                                    <div class="input-group-append">
                                        <button class="btn btn-outline-warning" type="button" id="psw-show">show</button>
                                    </div>
                                </div>
                                
                            {% endif %}
                            <small id="passwordHelp" class="form-text text-info ml-1">
                                Password must: <br />
                                <ul>
                                    <li>be 8 to 30 characters long</li>
                                    <li>contain at least {{ config['PASSWORD_NUM_LOWERS_MIN'] }} lowercase letters</li>
                                    <li>contain at least {{ config['PASSWORD_NUM_UPPERS_MIN'] }} uppercase letters</li>
                                    <li>contain at least {{ config['PASSWORD_NUM_DIGITS_MIN'] }} digits</li>
                                    <li>contain at least {{ config['PASSWORD_NUM_SYMBOLS_MIN'] }} one of the following characters: {{ config['PASSWORD_SPECIAL_SYMBOLS'] }}</li>
                                </ul>
                            </small>
                            </div><p></p>    
                            

                            {{form.confirm_password.label(class='form-control-label text-white mb-0')}}
                            <div class="form-row">
                            {% if form.confirm_password.errors %}
                                <div class='input-group input-group-sm col-md-12'>
                                    {{ form.confirm_password(class='form-control form-control-sm is-invalid', placeholder='Re-enter your password', maxlength=30) }}
                                    <div class="input-group-append">
                                        <button class="btn btn-outline-warning" type="button" id="confirm-psw-show">show</button>
                                    </div>
                                    <div class="invalid-feedback">
                                        {% for error in form.confirm_password.errors %}
                                            <span>{{ error }}</span>
                                        {% endfor %}
                                    </div>
                                </div>
                            {% else %}
                                <div class='input-group input-group-sm col-md-12'>
                                    {{ form.confirm_password(class='form-control form-control-sm', placeholder='Re-enter your password', maxlength=30) }}
                                    <div class="input-group-append">
                                        <button class="btn btn-outline-warning" type="button" id="confirm-psw-show">show</button>
                                    </div>
                                </div>
                            {% endif %}
                            </div><p></p> 
                            
                        </fieldset>
                        <div class='form-group'>
                            {{ form.submit(class='btn btn-outline-info') }}
                        </div>
                    </form>
                </div>

                <div class="col-4">
                    
                </div>
            </div>
        </div>



        <!-- jQuery first, then Popper.js, then Bootstrap JS -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
        <!-- Popper JS -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
        <!-- Latest compiled JavaScript -->
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
        
        <script src="../static/js/custom.js"></script>

        <script>
            $(document).ready(function(){
                var showPsw = $('#psw-show');  //show/hide button for the password
                var showConfirmPsw = $('#confirm-psw-show');  //show/hide button for the confirm password
                

                var pswField = $('#password');  //password field
                var confirmPswField = $('#confirm_password');  //confirm password field
                
    
                showPsw.on('mousedown', function() {
                    pswField.attr ("type", "text");
                })
                showPsw.on('mouseup mouseout', function() {
                    pswField.attr ("type", "password");
                })

                showConfirmPsw.on('mousedown', function() {
                    confirmPswField.attr ("type", "text");
                })
                showConfirmPsw.on('mouseup mouseout', function() {
                    confirmPswField.attr ("type", "password");
                })
                
                
    
            })
    
        </script>  

    </body>
</html>
